
## 📌 元数据

- **版本号：** v1.1
    
- **更新日期：** 2026-02-01
    
- **状态：** #待开发
    
- **标签：** #产品设计 #工具开发 #Python #Kimi #合规留痕 #Obsidian
    

---

## 1. 产品核心定位 (Product Definition)

### 🚩 核心愿景

> **“数字研究时代的【公证人】与【入库检票员】”**

一款面向专业研究者、金融合规人员及 AI 知识库构建者的 **Web 端轻量化工具**。它不仅负责将杂乱的网页信息清洗为标准化的“干净数据”以喂给 AI，更核心的作用是建立**“不可篡改的研究留痕”**。它将动态、易逝的网页固化为带有时间戳、作者署名和原始排版的 PDF“证据副本”，确保每一个研究结论都能精准溯源到具体的“原始出处”。

- **Slogan：** 让每一个观点都有据可查，让每一份知识都历久弥新。
    

---

## 2. 核心用户画像 (User Personas)

1. **合规型研究员 (Primary)**
    
    - **场景：** 撰写深度研报时引用了 50+ 处外部监管数据（如金监局官网）。
        
    - **痛点：** 网页链接容易失效（404），截图无法检索，普通打印丢失元数据，导致审计风险。
        
    - **需求：** 需要一份“法律有效”的原始快照，证明“我在那个时间点确实看到了这条政策”。
        
2. **AI 知识库构建者 (Secondary)**
    
    - **场景：** 维护 NotebookLM / Obsidian / RAG 知识库。
        
    - **痛点：** 文件名混乱（`index.pdf`），导致 AI 无法识别文章的时效性和权威性，输出过时信息。
        
    - **需求：** 自动清洗元数据，文件名自带 `YYYY-MM-DD` 和 `[作者]` 标签。
        
3. **团队协作成员**
    
    - **场景：** 多人协作课题。
        
    - **痛点：** 文件命名不统一，沟通成本高。
        
    - **需求：** 统一的“命名协议”，降低团队沟通熵值。
        

---

## 3. 功能需求清单 (Functional Requirements)

### ✅ P0：核心生存功能 (Must Have)

#### 3.1 鉴权与隐私 (BYOK 模式)

- [ ] **自带钥匙机制**：前端提供 Kimi API Key 输入框，用户使用自己的 Key，后端零成本。
    
- [ ] **隐私记忆**：利用浏览器 `localStorage` 加密缓存 Key，用户二次访问自动填充。
    
- [ ] **安全销毁**：API Key 仅在内存中流转，会话结束即销毁；生成的 PDF 仅在临时目录存储，下载后自动清理。
    

#### 3.2 智能排版渲染引擎 (The Engine)

- [ ] **智能去噪**：自动移除网页的 Sidebar、Popup、悬浮广告、页眉页脚干扰。
    
- [ ] **分级 CSS 注入策略**（解决“大段空白”痛点）：
    
    - **策略 A（微信/知乎模式）**：采用“柔性注入”。保留 `break-inside: avoid`，确保图片和精美排版不被切断。
        
    - **策略 B（政府/通用官网模式）**：采用“强力注入”。强制 `html, body { height: auto !important; overflow: visible !important; }` 及 `* { break-inside: auto !important; }`，彻底解决分页留白和内容截断问题。
        

#### 3.3 深度元数据提取 (The Brain)

- [ ] **多模态/语义提取**：后端抓取网页 `innerText`（前 5000 字），调用 Kimi 2.5 模型提取元数据。
    
- [ ] **标准化命名**：严格执行 `[日期]_[作者]_[标题].pdf` 格式（例：`20260201_金监局_关于银行业发展的指导意见.pdf`）。
    
- [ ] **兜底容错**：若 API 调用失败，自动降级为本地正则/BeautifulSoup 提取；若本地失败，标记为 `Unknown`，保证流程不中断。
    

#### 3.4 证据留痕 (Evidence Stamping)  
3.4 证据留痕（证据印章）

- [ ] **数字水印**：在生成的 PDF 页眉/页脚强制注入微小灰字：`Archived by ResearchTool on [当前时间] | Original Source: [原始 URL]`
    
- [ ] **价值**：即使文件名被修改，打开文件内容依然拥有完整的溯源信息。
    

---

### 📅 P1：增值体验功能 (Should Have)

- [ ] **批量处理队列**：支持文本框输入多行 URL，后端排队处理，避免触发并发限制。
    
- [ ] **人机协作修正**：生成前弹窗预览识别结果（标题/作者/时间），允许用户手动修正 AI 的错误。
    
- [ ] **引用生成器**：转换完成后，提供一键复制 GB/T 7714 或 APA 格式的引用文本。
    
- [ ] **Markdown 数据包**：提供 `.zip` 下载，包含 PDF 原件 + `.md` 纯文本（含 AI 摘要），方便直接导入 Obsidian。
    

---

## 4. 技术架构 (Technical Stack)  
4.技术架构（Technical Stack）

|**组件  成分**|**技术选型**|**作用  行动**|
|---|---|---|
|**前端框架**|**Streamlit** (Python)  <br>**Streamlit** （Python）|极速构建 Web 交互|
|**后端逻辑**|**Python**|业务逻辑处理|
|**浏览器内核**|**Playwright** (Chromium)  <br>**剧作家** （铬）|负责无头渲染和打印|
|**AI 核心**|**Moonshot AI** (Kimi 2.5)  <br>**Moonshot AI** （Kimi 2.5）|语义分析和元数据提取|
|**部署方式**|**Docker / Streamlit Cloud  Docker / Streamlit 云**|容器化部署  集装箱化部门|

---

## 5. 验收标准 (Acceptance Criteria)  
5.验收标准（Acceptance Criteria）

1. **政府网站测试**：输入国家金融监督管理总局文章链接，生成的 PDF 无大段空白，内容连续，页脚包含原始 URL 水印。
    
2. **微信文章测试**：输入微信公众号链接，生成的 PDF 排版精美，图片无裂开，文件名准确识别出“公众号名称”为作者。
    
3. **溯源测试**：文件导入 NotebookLM 后，AI 能通过文件名准确识别出该文章的时效性（年份）。
    

---

## 📝 待办事项 (Action Items)  📝 待办事项（Action Items）

- [ ] 基于现有本地脚本，重构为 Streamlit Web App 框架。
    
- [ ] 编写 CSS 注入模块的“分级判断逻辑”（If URL in Wechat list vs Else）。
    
- [ ] 联调 Kimi API，确保在 Web 环境下的 Token 传递安全。